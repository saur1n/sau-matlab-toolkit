%% Sau MATLAB Colony Analyzer Toolkit
%
%%  pos2coor.m
%   
%   Author: Saurin Parikh, October, 2017
%   dr.saurin.parikh@gmail.com
%   
%%
    tic

%   INDICES

    coor6144 = [];
    coor1536 = [];
    coor384 = [];

    for i = linspace(1,1,1)
        coor6144 = [coor6144, [ones(1,6144)*i;indices(6144)]];
    end

    for i = linspace(1,4,4)
        coor1536 = [coor1536, [ones(1,1536)*i;indices(1536)]];
    end

    for i = linspace(1,4,4)
        coor384 = [coor384, [ones(1,384)*i;indices(384)]];
    end

%%
    plate6144_1 = col2grid(linspace(1,6144,6144));
    plate6144_2 = col2grid(linspace(6145,6144*2,6144));
    plate6144_3 = col2grid(linspace(6144*2+1,6144*3,6144));
    plate6144_4 = col2grid(linspace(6144*3+1,6144*4,6144));
    plate6144_5 = col2grid(linspace(6144*4+1,6144*5,6144));
    plate6144 = [[grid2row(plate6144_1),grid2row(plate6144_2),grid2row(plate6144_3),...
        grid2row(plate6144_4),grid2row(plate6144_5)];coor6144];

    [plate1536_1, plate1536_2, plate1536_3, plate1536_4] = ...
        downscale(plate6144_1);
    [plate1536_5, plate1536_6, plate1536_7, plate1536_8] = ...
        downscale(plate6144_2);
    [plate1536_9, plate1536_10, plate1536_11, plate1536_12] = ...
        downscale(plate6144_3);
    [plate1536_13, plate1536_14, plate1536_15, plate1536_16] = ...
        downscale(plate6144_4);
    [plate1536_17, plate1536_18, plate1536_19, plate1536_20] = ...
        downscale(plate6144_5);
    plate1536 = [[grid2row(plate1536_1),grid2row(plate1536_2),grid2row(plate1536_3),...
        grid2row(plate1536_4),grid2row(plate1536_5),...
        grid2row(plate1536_6),grid2row(plate1536_7),grid2row(plate1536_8),...
        grid2row(plate1536_9),grid2row(plate1536_10),...
        grid2row(plate1536_11),grid2row(plate1536_12),grid2row(plate1536_13),...
        grid2row(plate1536_14),grid2row(plate1536_15),...
        grid2row(plate1536_16),grid2row(plate1536_17),grid2row(plate1536_18),...
        grid2row(plate1536_19),grid2row(plate1536_20)];coor1536];

    [plate384_1, plate384_2, plate384_3, plate384_4] = ...
        downscale(plate1536_1);
    [plate384_5, plate384_6, plate384_7, plate384_8] = ...
        downscale(plate1536_2);
    [plate384_9, plate384_10, plate384_11, plate384_12] = ...
        downscale(plate1536_3);
    [plate384_13, plate384_14, plate384_15, plate384_16] = ...
        downscale(plate1536_4);
    [plate384_17, plate384_18, plate384_19, plate384_20] = ...
        downscale(plate1536_5);

    [plate384_21, plate384_22, plate384_23, plate384_24] = ...
        downscale(plate1536_6);
    [plate384_25, plate384_26, plate384_27, plate384_28] = ...
        downscale(plate1536_7);
    [plate384_29, plate384_30, plate384_31, plate384_32] = ...
        downscale(plate1536_8);
    [plate384_33, plate384_34, plate384_35, plate384_36] = ...
        downscale(plate1536_9);
    [plate384_37, plate384_38, plate384_39, plate384_40] = ...
        downscale(plate1536_10);

    [plate384_41, plate384_42, plate384_43, plate384_44] = ...
        downscale(plate1536_11);
    [plate384_45, plate384_46, plate384_47, plate384_48] = ...
        downscale(plate1536_12);
    [plate384_49, plate384_50, plate384_51, plate384_52] = ...
        downscale(plate1536_13);
    [plate384_53, plate384_54, plate384_55, plate384_56] = ...
        downscale(plate1536_14);
    [plate384_57, plate384_58, plate384_59, plate384_60] = ...
        downscale(plate1536_15);

    [plate384_61, plate384_62, plate384_63, plate384_64] = ...
        downscale(plate1536_16);
    [plate384_65, plate384_66, plate384_67, plate384_68] = ...
        downscale(plate1536_17);
    [plate384_69, plate384_70, plate384_71, plate384_72] = ...
        downscale(plate1536_18);
    [plate384_73, plate384_74, plate384_75, plate384_76] = ...
        downscale(plate1536_19);
    [plate384_77, plate384_78, plate384_79, plate384_80] = ...
        downscale(plate1536_20);

    plate384 = [[grid2row(plate384_1),grid2row(plate384_2),grid2row(plate384_3),...
        grid2row(plate384_4),grid2row(plate384_5),...
        grid2row(plate384_6),grid2row(plate384_7),grid2row(plate384_8),...
        grid2row(plate384_9),grid2row(plate384_10),...
        grid2row(plate384_11),grid2row(plate384_12),grid2row(plate384_13),...
        grid2row(plate384_14),grid2row(plate384_15),...
        grid2row(plate384_16),grid2row(plate384_17),grid2row(plate384_18),...
        grid2row(plate384_19),grid2row(plate384_20),...
        grid2row(plate384_21),grid2row(plate384_22),grid2row(plate384_23),...
        grid2row(plate384_24),grid2row(plate384_25),...
        grid2row(plate384_26),grid2row(plate384_27),grid2row(plate384_28),...
        grid2row(plate384_29),grid2row(plate384_30),...
        grid2row(plate384_31),grid2row(plate384_32),grid2row(plate384_33),...
        grid2row(plate384_34),grid2row(plate384_35),...
        grid2row(plate384_36),grid2row(plate384_37),grid2row(plate384_38),...
        grid2row(plate384_39),grid2row(plate384_40),...
        grid2row(plate384_41),grid2row(plate384_42),grid2row(plate384_43),...
        grid2row(plate384_44),grid2row(plate384_45),...
        grid2row(plate384_46),grid2row(plate384_47),grid2row(plate384_48),...
        grid2row(plate384_49),grid2row(plate384_50),...
        grid2row(plate384_51),grid2row(plate384_52),grid2row(plate384_53),...
        grid2row(plate384_54),grid2row(plate384_55),...
        grid2row(plate384_56),grid2row(plate384_57),grid2row(plate384_58),...
        grid2row(plate384_59),grid2row(plate384_60),...
        grid2row(plate384_61),grid2row(plate384_62),grid2row(plate384_63),...
        grid2row(plate384_64),grid2row(plate384_65),...
        grid2row(plate384_66),grid2row(plate384_67),grid2row(plate384_68),...
        grid2row(plate384_69),grid2row(plate384_70),...
        grid2row(plate384_71),grid2row(plate384_72),grid2row(plate384_73),...
        grid2row(plate384_74),grid2row(plate384_75),...
        grid2row(plate384_76),grid2row(plate384_77),grid2row(plate384_78),...
        grid2row(plate384_79),grid2row(plate384_80)];coor384];

    toc

%%

    csvwrite('384pos2coor.csv',plate384');
    csvwrite('1536pos2coor.csv',plate1536');
    csvwrite('6144pos2coor.csv',plate6144');

%%
    connectSQL;

%%
    tic
    exec(conn, ['create table TEMP_pos2coor384 (pos int not null, 384plate int not null,'...
        ' 384row int not null, 384col int not null)']);

    tablename = 'TEMP_pos2coor384';
    colnames = {'pos','384plate','384row','384col'};
    data = plate384';
%     data = csvread('384pos2coor.csv');
    datainsert(conn,tablename,colnames,data);
    toc

%%
    tic
    exec(conn, ['create table pos2coor1536 (pos int not null, 1536plate int not null,'...
        ' 1536row int not null, 1536col int not null)']);

    tablename = 'pos2coor1536';
    colnames = {'pos','1536plate','1536row','1536col'};
    %data = plate1536';
    data = csvread('1536pos2coor.csv');
    datainsert(conn,tablename,colnames,data);
    toc

%%
    tic
    exec(conn, ['create table pos2coor6144 (pos int not null, 6144plate int not null,'...
        ' 6144row int not null, 6144col int not null)']);

    tablename = 'pos2coor6144';
    colnames = {'pos','6144plate','6144row','6144col'};
    %data = plate6144';
    data = csvread('6144pos2coor.csv');
    datainsert(conn,tablename,colnames,data);
    toc
    
 %%

    close(conn);



